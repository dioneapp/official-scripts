{
  "requirements": {
    "os": ["windows", "linux", "mac"],
    "gpus": ["nvidia"]
  },
  "dependencies": {
    "git": { "version": "latest" },
    "uv": { "version": "latest" },
    "ffmpeg": { "version": "latest" }
  },
  "installation": [
    {
      "name": "Cloning repository",
      "commands": ["git clone https://github.com/pakfur/metascan.git metascan"]
    },
    {
      "name": "Installing requirements",
      "env": { "name": "env", "version": "3.10", "type": "uv" },
      "commands": [
        "cd metascan",
        "uv pip install torch torchvision --index-url https://download.pytorch.org/whl/cu121",
        "uv pip install -r requirements.txt"
      ]
    },
    {
        "name": "Installing models",
        "env": { "name": "env", "version": "3.10", "type": "uv" },
        "commands": [
          "cd metascan",
          "uv run python setup_models.py"
        ]
      }
  ],
  "start": [
    {
      "name": "Starting MetaScan",
      "env": "env",
      "environment": {
        "CUDA_VISIBLE_DEVICES": "0",
        "PYTORCH_CUDA_ALLOC_CONF": "max_split_size_mb:512",
        "OMP_NUM_THREADS": "4"
      },
      "commands": [
        "cd metascan",
        "echo Opening desktop application...",
        "uv run python main.py"
      ]
    }
  ]
}